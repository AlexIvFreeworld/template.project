(()=>{function dateTimePickerInit(){if("function"!=typeof $.fn.datetimepicker)return;let dateFormat=arAllcorp3Options.THEME.DATE_FORMAT;dateFormat="DOT"===dateFormat?"dd.mm.yyyy hh:ii":"HYPHEN"===dateFormat?"dd-mm-yyyy hh:ii":"SPACE"===dateFormat?"dd mm yyyy hh:ii":"SLASH"===dateFormat?"dd/mm/yyyy hh:ii":"dd:mm:yyyy hh:ii";const $datetime=$(".form input.datetime, .form input.date");$datetime.on("click",(function(e){e.stopPropagation(),$(".datetimepicker").hide(),$(this).datetimepicker("show")}));let field=$datetime.closest(".form-group");if($datetime.each((function(){let $item=$(this);const bOnlyTime=$item.hasClass("date");$item.prop("readonly","readonly"),$item.datetimepicker({weekStart:1,todayBtn:1,autoclose:1,todayHighlight:1,startView:2,forceParse:0,timepicker:!bOnlyTime,format:dateFormat,autoclose:!0,language:"ru",keyboardNavigation:!1,minView:bOnlyTime?2:0}).on("show",(function(ev){let calendarHeight=330,classes2Add="datetimepicker-dropdown-bottom-right",heightElementTop=ev.currentTarget.closest(".datetime").getBoundingClientRect(),heightFormTop=ev.currentTarget.closest(".form").getBoundingClientRect(),elementTop=heightElementTop.top-heightFormTop.top,heightElementBottom=ev.currentTarget.closest(".datetime").getBoundingClientRect(),heightFormBottom=ev.currentTarget.closest(".form").getBoundingClientRect(),viewBottom=heightElementBottom.bottom-heightFormBottom.bottom,checkPositionInput=ev.currentTarget.closest(".dates").getBoundingClientRect();if(ev.currentTarget.closest(".popup")){elementTop>330&&elementTop>viewBottom&&checkPositionInput.top>=330&&(classes2Add="datetimepicker-dropdown-top-right");let dataPicker=$(ev.currentTarget).data("datetimepicker");dataPicker&&dataPicker.picker&&dataPicker.picker.removeClass("datetimepicker-dropdown-bottom-right datetimepicker-dropdown-top-right").addClass(classes2Add)}}))})),field.length){const now=new Date,today=now.getFullYear()+"-0"+(now.getMonth()+1).toString().padStart(2,"0")+"-"+now.getDate().toString().padStart(2,"0")+" "+now.getHours().toString().padStart(2,"0")+":"+now.getMinutes().toString().padStart(2,"0");$datetime.datetimepicker("setStartDate",today),$(field).each((function(){let picker=$(this).find("input").data("datetimepicker").picker.detach();$(this).append(picker)}))}$("body").on("click",(function(e){$(e.target)[0]!=field[0]&&$(".datetimepicker").hide()}))}readyDOM(()=>{dateTimePickerInit()})})();